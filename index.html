<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban Planner's Aedes Action Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        /* Custom checkbox and radio styles */
        .custom-radio:checked {
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
        }
         .custom-checkbox:checked {
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto px-4 py-8 md:py-12 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-700">Urban Planner's Aedes Action Tool</h1>
            <p class="mt-2 text-lg text-gray-600">Integrate public health into your planning practice to design resilient, mosquito-free cities.</p>
        </header>

        <main id="app-container" class="bg-white p-6 md:p-8 rounded-2xl shadow-lg">
            
            <!-- Form Sections -->
            <form id="planner-form">
                <!-- Step 1: Planning Context -->
                <div id="step-1" class="form-section active">
                    <h2 class="text-2xl font-semibold mb-2 text-teal-600">Step 1: Planning Context & Health Risk</h2>
                    <p class="mb-6 text-gray-500">First, identify the scope of your work and the local public health context.</p>
                    
                    <h3 class="font-semibold text-gray-700 mb-3">What is the primary focus of your current planning effort?</h3>
                     <div class="space-y-4 mb-8">
                        <div>
                            <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                                <input type="radio" name="planning_focus" value="new_development" class="h-5 w-5 custom-radio border-gray-300 text-teal-600 focus:ring-teal-500" required>
                                <span class="ml-4">
                                    <strong class="font-semibold block">New Development / Master Plan</strong>
                                    <span class="text-sm text-gray-500">Designing a new residential, commercial, or mixed-use area.</span>
                                </span>
                            </label>
                        </div>
                        <div>
                            <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                                <input type="radio" name="planning_focus" value="retrofitting" class="h-5 w-5 custom-radio border-gray-300 text-teal-600 focus:ring-teal-500">
                                <span class="ml-4">
                                    <strong class="font-semibold block">Retrofitting / Urban Regeneration</strong>
                                    <span class="text-sm text-gray-500">Upgrading infrastructure and housing in an existing neighborhood.</span>
                                </span>
                            </label>
                        </div>
                         <div>
                            <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                                <input type="radio" name="planning_focus" value="policy" class="h-5 w-5 custom-radio border-gray-300 text-teal-600 focus:ring-teal-500">
                                <span class="ml-4">
                                    <strong class="font-semibold block">City-Wide Policy & Zoning</strong>
                                    <span class="text-sm text-gray-500">Developing comprehensive plans, zoning ordinances, or building codes.</span>
                                </span>
                            </label>
                        </div>
                    </div>

                    <h3 class="font-semibold text-gray-700 mb-3">What is the current Aedes-borne disease situation in this area?</h3>
                    <div class="space-y-4">
                        <select name="transmission_level" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                            <option value="epidemic">Epidemic Transmission (Regular, large-scale outbreaks)</option>
                            <option value="seasonal">Regular Seasonal Transmission (Predictable annual increases)</option>
                            <option value="sporadic">Sporadic Transmission (Occasional, isolated cases)</option>
                            <option value="present_no_local">Aedes Present, No Local Transmission (Vector is present)</option>
                        </select>
                    </div>
                </div>

                <!-- Step 2: Built Environment Audit -->
                <div id="step-2" class="form-section">
                    <h2 class="text-2xl font-semibold mb-2 text-teal-600">Step 2: Built Environment Audit</h2>
                    <p class="mb-6 text-gray-500">Identify key physical characteristics and infrastructure gaps in your planning area.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="urban_challenges" value="water_supply" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Inconsistent Piped Water</strong>
                                <span class="text-sm text-gray-500">Residents frequently store water in containers.</span>
                            </span>
                        </label>
                         <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="urban_challenges" value="waste_management" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Poor Solid Waste Collection</strong>
                                <span class="text-sm text-gray-500">Irregular collection leads to discarded containers holding water.</span>
                            </span>
                        </label>
                        <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="urban_challenges" value="drainage" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Ineffective Drainage</strong>
                                <span class="text-sm text-gray-500">Storm drains and gutters are often blocked or poorly designed.</span>
                            </span>
                        </label>
                        <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="urban_challenges" value="housing" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Inadequate Housing Stock</strong>
                                <span class="text-sm text-gray-500">Many homes lack screens or have water-collecting features.</span>
                            </span>
                        </label>
                        <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="urban_challenges" value="green_infra" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Lack of Green Infrastructure</strong>
                                <span class="text-sm text-gray-500">Limited use of bioswales, permeable pavements, or green roofs for stormwater.</span>
                            </span>
                        </label>
                        <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="urban_challenges" value="construction" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Unmanaged Construction Sites</strong>
                                <span class="text-sm text-gray-500">New construction projects frequently create standing water.</span>
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Step 3: Policy & Regulatory Framework -->
                <div id="step-3" class="form-section">
                    <h2 class="text-2xl font-semibold mb-2 text-teal-600">Step 3: Policy & Regulatory Framework</h2>
                    <p class="mb-6 text-gray-500">Assess your current policy tools, collaborative processes, and regulatory environment.</p>
                     <div class="space-y-4">
                        <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="governance_challenges" value="collaboration" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Siloed Departments</strong>
                                <span class="text-sm text-gray-500">Planning, Public Works, and Health departments rarely coordinate.</span>
                            </span>
                        </label>
                        <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="governance_challenges" value="building_codes" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Outdated Building Codes</strong>
                                <span class="text-sm text-gray-500">Codes lack specific standards for mosquito-proofing (e.g., screens, drainage).</span>
                            </span>
                        </label>
                         <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="governance_challenges" value="health_assessment" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">No Health Impact Assessments</strong>
                                <span class="text-sm text-gray-500">Development proposals are not formally reviewed for public health risks.</span>
                            </span>
                        </label>
                        <label class="flex items-start p-4 border rounded-lg cursor-pointer hover:bg-teal-50 transition-colors">
                            <input type="checkbox" name="governance_challenges" value="community_engagement" class="h-5 w-5 mt-1 custom-checkbox rounded border-gray-300 text-teal-600 focus:ring-teal-500">
                            <span class="ml-4">
                                <strong class="font-semibold block">Limited Public Participation</strong>
                                <span class="text-sm text-gray-500">Community input on infrastructure or housing projects is minimal.</span>
                            </span>
                        </label>
                    </div>
                </div>
            </form>

            <!-- Navigation Buttons -->
            <div id="navigation" class="mt-8 flex justify-between">
                <button id="prev-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-6 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>Previous</button>
                <button id="next-btn" class="bg-teal-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-teal-700 transition-colors">Next</button>
                <button id="submit-btn" class="hidden bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-emerald-700 transition-transform transform hover:scale-105">Generate Action Plan</button>
            </div>

             <!-- Results Section -->
            <div id="results-container" class="hidden">
                 <!-- Results content will be injected here by JavaScript -->
            </div>
            
        </main>
    </div>

    <script>
        const app = {
            currentStep: 1,
            totalSteps: 3,
            form: document.getElementById('planner-form'),
            steps: document.querySelectorAll('.form-section'),
            prevBtn: document.getElementById('prev-btn'),
            nextBtn: document.getElementById('next-btn'),
            submitBtn: document.getElementById('submit-btn'),
            navigation: document.getElementById('navigation'),
            resultsContainer: document.getElementById('results-container'),
            appContainer: document.getElementById('app-container'),

            init() {
                this.nextBtn.addEventListener('click', () => this.changeStep(1));
                this.prevBtn.addEventListener('click', () => this.changeStep(-1));
                this.submitBtn.addEventListener('click', () => this.generatePlan());
                this.updateButtons();
            },

            changeStep(direction) {
                // Validation for current step
                const currentStepElement = document.getElementById(`step-${this.currentStep}`);
                const inputs = currentStepElement.querySelectorAll('input[required], select[required]');
                let isValid = true;
                inputs.forEach(input => {
                    if (input.type === 'radio') {
                        const radioGroup = document.querySelector(`input[name="${input.name}"]:checked`);
                        if (!radioGroup) {
                            isValid = false;
                        }
                    } else if (!input.value) {
                        isValid = false;
                    }
                });

                if (direction > 0 && !isValid) {
                     this.showError('Please make a selection to continue.');
                     return;
                }

                this.currentStep += direction;
                this.steps.forEach(step => step.classList.remove('active'));
                document.getElementById(`step-${this.currentStep}`).classList.add('active');
                this.updateButtons();
            },

            updateButtons() {
                this.prevBtn.disabled = this.currentStep === 1;
                this.nextBtn.classList.toggle('hidden', this.currentStep === this.totalSteps);
                this.submitBtn.classList.toggle('hidden', this.currentStep !== this.totalSteps);
            },
            
            showError(message) {
                let errorEl = document.getElementById('error-message');
                if (!errorEl) {
                    errorEl = document.createElement('div');
                    errorEl.id = 'error-message';
                    errorEl.className = 'mt-4 text-center text-red-600 font-semibold p-3 bg-red-100 rounded-lg';
                    this.navigation.insertAdjacentElement('beforebegin', errorEl);
                }
                errorEl.textContent = message;
                setTimeout(() => errorEl.remove(), 3000);
            },

            generatePlan() {
                const formData = new FormData(this.form);
                const data = {
                    planning_focus: formData.get('planning_focus'),
                    transmission_level: formData.get('transmission_level'),
                    urban_challenges: formData.getAll('urban_challenges'),
                    governance_challenges: formData.getAll('governance_challenges'),
                };

                const recommendations = this.getRecommendations(data);
                this.displayResults(recommendations, data.planning_focus);
            },

            getRecommendations(data) {
                const recs = {
                    policy: [],
                    design: [],
                    collaboration: [],
                    coBenefits: new Set()
                };

                // Planner-specific recommendations
                switch(data.planning_focus) {
                    case 'new_development':
                        recs.design.push({
                            title: 'Mandate Aedes-Proof Design from the Start',
                            text: 'Integrate mosquito-proofing directly into the design guidelines for the master plan. This includes requirements for screened windows/doors, elimination of flat roofs that pool water, and landscaping that ensures proper drainage.',
                            benefits: ['Environment', 'Health']
                        });
                        break;
                    case 'retrofitting':
                         recs.policy.push({
                            title: 'Create a Capital Improvement Plan for Health',
                            text: 'Develop a phased capital improvement plan that prioritizes upgrading drainage systems, retrofitting public housing with screens, and investing in consistent solid waste services for the regeneration area.',
                            benefits: ['Environment', 'Social', 'Health']
                        });
                        break;
                    case 'policy':
                        recs.policy.push({
                            title: 'Update Comprehensive Plan & Zoning Ordinance',
                            text: 'Revise the city\'s comprehensive plan to explicitly state public health and vector control as a primary goal. Update the zoning ordinance with standards that promote Aedes-free environments (e.g., green infrastructure requirements, building design standards).',
                            benefits: ['Institutional', 'Health']
                        });
                        break;
                }

                // Urban Challenges -> Design & Policy Recs
                if (data.urban_challenges.includes('drainage') || data.urban_challenges.includes('green_infra')) {
                    recs.design.push({
                        title: 'Implement Green Infrastructure for Stormwater',
                        text: 'Promote or require the use of green infrastructure like bioswales, permeable pavements, and rain gardens. These methods manage stormwater effectively, reduce standing water, and provide ecological co-benefits.',
                        benefits: ['Environment', 'Health']
                    });
                }
                if (data.urban_challenges.includes('waste_management')) {
                     recs.policy.push({
                        title: 'Integrate Waste Management into Land Use Planning',
                        text: 'Zone for and invest in modern, intermediate solid waste collection and management sites. Partner with the private sector to create economic incentives for recycling and waste reduction.',
                        benefits: ['Environment', 'Economy']
                    });
                }
                if (data.urban_challenges.includes('construction')) {
                    recs.policy.push({
                        title: 'Enforce Construction Site Management Ordinances',
                        text: 'Implement and enforce regulations that require developers to manage water accumulation on construction sites. This could include regular inspections and penalties for non-compliance.',
                        benefits: ['Institutional', 'Health']
                    });
                }

                // Governance Challenges -> Collaboration & Policy Recs
                 if (data.governance_challenges.includes('collaboration')) {
                    recs.collaboration.push({
                        title: 'Establish a "Healthy Cities" Inter-Agency Task Force',
                        text: 'Formally establish a working group with standing members from Planning, Public Works, Health, and Environment. Mandate this group to review development proposals and coordinate on infrastructure projects.',
                        benefits: ['Institutional']
                    });
                }
                 if (data.governance_challenges.includes('building_codes')) {
                    recs.policy.push({
                        title: 'Modernize Building & Housing Codes',
                        text: 'Lead an initiative to update local building and housing codes to include mandatory mosquito-proofing standards. This creates a long-term, sustainable solution that requires minimal ongoing cost.',
                        benefits: ['Institutional', 'Health', 'Environment']
                    });
                }
                 if (data.governance_challenges.includes('health_assessment')) {
                    recs.policy.push({
                        title: 'Introduce Health Impact Assessments (HIAs)',
                        text: 'Develop a formal process for conducting HIAs for all major development projects. This ensures that potential public health risks, including vector-borne diseases, are identified and mitigated before construction begins.',
                        benefits: ['Institutional', 'Health']
                    });
                }
                if (data.governance_challenges.includes('community_engagement')) {
                     recs.collaboration.push({
                        title: 'Integrate Participatory Planning Processes',
                        text: 'Embed community engagement into the planning process itself. Use tools like charrettes and workshops to co-design public spaces and infrastructure improvements with residents, ensuring solutions are locally appropriate and desired.',
                        benefits: ['Social', 'Institutional']
                    });
                }
                
                // Add a health context recommendation
                if(data.transmission_level === 'epidemic' || data.transmission_level === 'seasonal') {
                     recs.collaboration.push({
                        title: 'Coordinate with Public Health for Targeted Action',
                        text: 'Due to high disease transmission, your planning efforts should be closely coordinated with the Health Department. Use their surveillance data to prioritize infrastructure upgrades in disease hotspots.',
                        benefits: ['Health', 'Institutional']
                    });
                }

                // Consolidate co-benefits
                [...recs.policy, ...recs.design, ...recs.collaboration].forEach(rec => {
                    rec.benefits.forEach(b => recs.coBenefits.add(b));
                });
                
                return recs;
            },

            displayResults(recs, planning_focus) {
                this.form.classList.add('hidden');
                this.navigation.classList.add('hidden');
                this.resultsContainer.classList.remove('hidden');

                const benefitsMap = {
                    'Health': { icon: '❤️', text: 'Improved Health & Well-being' },
                    'Economy': { icon: '💰', text: 'Economic Growth & Savings' },
                    'Environment': { icon: '🌳', text: 'Better Urban Environment' },
                    'Social': { icon: '🤝', text: 'Community Empowerment & Equity' },
                    'Institutional': { icon: '🏛️', text: 'Stronger Governance' }
                };

                let benefitsHtml = '<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">';
                recs.coBenefits.forEach(benefit => {
                    benefitsHtml += `
                        <div class="text-center p-3 bg-gray-100 rounded-lg">
                            <span class="text-2xl">${benefitsMap[benefit].icon}</span>
                            <p class="text-sm font-medium mt-1">${benefitsMap[benefit].text}</p>
                        </div>
                    `;
                });
                benefitsHtml += '</div>';

                const generateSectionHtml = (title, recommendations) => {
                    if (recommendations.length === 0) return '';
                    let html = `<h3 class="text-xl font-bold text-teal-700 mt-8 mb-4 border-b-2 border-teal-200 pb-2">${title}</h3><div class="space-y-4">`;
                    recommendations.forEach(rec => {
                        html += `
                            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                                <h4 class="font-semibold text-lg text-gray-800">${rec.title}</h4>
                                <p class="text-gray-600 mt-1">${rec.text}</p>
                            </div>
                        `;
                    });
                    html += '</div>';
                    return html;
                };

                this.resultsContainer.innerHTML = `
                    <div class="text-center">
                       <h2 class="text-3xl font-bold text-emerald-600">Urban Planner's Action Plan</h2>
                       <p class="mt-2 text-gray-600">A prioritized action plan for your <strong class="text-emerald-700">${planning_focus.replace(/_/g, ' ')}</strong> project.</p>
                    </div>

                    <div class="mt-8 p-4 bg-teal-50 border-l-4 border-teal-500 rounded-r-lg">
                        <h3 class="font-semibold text-teal-800">Primary Co-Benefits of Your Plan</h3>
                        <p class="text-sm text-teal-700 mb-4">Implementing these actions will contribute to broader city goals.</p>
                        ${benefitsHtml}
                    </div>

                    ${generateSectionHtml('Policy & Regulatory Actions', recs.policy)}
                    ${generateSectionHtml('Design & Infrastructure Interventions', recs.design)}
                    ${generateSectionHtml('Collaboration & Process Improvements', recs.collaboration)}

                    <div class="mt-10 text-center">
                        <button id="restart-btn" class="bg-gray-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-gray-600 transition-colors">Start Over</button>
                    </div>
                `;

                document.getElementById('restart-btn').addEventListener('click', () => {
                    this.resultsContainer.classList.add('hidden');
                    this.resultsContainer.innerHTML = '';
                    this.form.reset();
                    this.form.classList.remove('hidden');
                    this.navigation.classList.remove('hidden');
                    this.currentStep = 1;
                    this.steps.forEach(step => step.classList.remove('active'));
                    document.getElementById(`step-${this.currentStep}`).classList.add('active');
                    this.updateButtons();
                });
            }
        };

        app.init();
    </script>
</body>
</html>

